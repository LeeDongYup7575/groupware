<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>ë©”ì¸ ì‚¬ì´ë“œë°”</title>


</head>
<body>
<!-- ê³µí†µ ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ í¬í•¨ -->
<th:block th:fragment="sidebarAssets">
  <link rel="stylesheet" th:href="@{/css/fragments/sidebar-common.css}">
</th:block>

<script>
  function openChat() {
    const token = localStorage.getItem('accessToken');
    if (!token) {
      alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤");
      return;
    }

    // ìƒˆ ì°½ ì—´ê¸°
    const url = `http://10.10.55.57:3000?token=${encodeURIComponent(token)}`;
    const newWindow = window.open(url, "_blank");

    if (!newWindow || newWindow.closed || typeof newWindow.closed === 'undefined') {
      alert("íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. íŒì—… í—ˆìš©ì„ í•´ì£¼ì„¸ìš”.");
    }
  }
</script>


<!-- ë©”ì¸ ì‚¬ì´ë“œë°” -->
<div th:fragment="sidebar" id="sidebar" class="sidebar">
  <div class="sidebar-menu">
    <ul>
      <li><a th:href="@{/mail}"><span class="sidebar-icon">ğŸ“§</span> ì´ë©”ì¼</a></li>
      <li><a th:href="@{/board}"><span class="sidebar-icon">ğŸ“‹</span> ê²Œì‹œíŒ</a></li>
      <li><a href="#" onclick="event.preventDefault(); openChat();"><span class="sidebar-icon">ğŸ’¬</span> ë©”ì‹œì§€</a></li>
      <li><a th:href="@{/videochat}"><span class="sidebar-icon">ğŸ–¥ï¸</span> í™”ìƒì±„íŒ…</a></li>
      <li><a href="#"><span class="sidebar-icon">ğŸ“¨</span> ê³µìš© ë©”ì¼</a></li>
      <li><a th:href="@{/contact}"><span class="sidebar-icon">ğŸ“š</span> ì£¼ì†Œë¡</a></li>
      <li><a th:href="@{/booking/main}"><span class="sidebar-icon">ğŸ”–</span> ì˜ˆì•½</a></li>
      <li><a href="#"><span class="sidebar-icon">ğŸ“‚</span> ë¬¸ì„œ ê´€ë¦¬</a></li>
      <li><a th:href="@{/attend/main}"><span class="sidebar-icon">â°</span> ê·¼ë¬´/ê²½ë¹„ì²˜ë¦¬</a></li>
      <li><a th:href="@{/edsm/main}"><span class="sidebar-icon">ğŸ“</span> ì „ìê²°ì¬</a></li>
      <li><a href="#"><span class="sidebar-icon">ğŸ‘¥</span> ì¡°ì§ë„</a></li>
      <!-- ê´€ë¦¬ì í˜ì´ì§€ ì¸í„°ì…‰í„°ë¡œ ê¶Œí•œ í™•ì¸ í›„ ì—°ê²°ë©ë‹ˆë‹¹ -->
      <li th:if="${isAdmin}">
        <a th:href="${adminUrl}" id="adminLink"><span class="sidebar-icon">âš™ï¸</span> ê´€ë¦¬ì í˜ì´ì§€</a>
      </li>
      <li><a th:href="@{/faq}"><span class="sidebar-icon">â“</span> FAQ</a></li>
    </ul>
  </div>
</div>

<!-- ê³µí†µ ì‚¬ì´ë“œë°” ìŠ¤í¬ë¦½íŠ¸ í¬í•¨ -->
<th:block th:fragment="sidebarScripts">
  <script th:src="@{/js/fragments/sidebar-common.js}"></script>
</th:block>

</body>
</html>