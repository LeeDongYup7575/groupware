<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ê²Œì‹œíŒ ì‚¬ì´ë“œë°”</title>
</head>
<body>
<!-- ê³µí†µ ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼ í¬í•¨ -->
<th:block th:fragment="sidebarAssets">
    <link rel="stylesheet" th:href="@{/css/fragments/sidebar-common.css}">
</th:block>
<script>
    function openChat() {
        const token = localStorage.getItem('accessToken');
        if (!token) {
            alert("ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤");
            return;
        }

        // ìƒˆ ì°½ ì—´ê¸°
        const url = `http://10.10.55.57:3000?token=${encodeURIComponent(token)}`;
        const newWindow = window.open(url, "_blank");

        if (!newWindow || newWindow.closed || typeof newWindow.closed === 'undefined') {
            alert("íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. íŒì—… í—ˆìš©ì„ í•´ì£¼ì„¸ìš”.");
        }
    }
</script>
<!-- ê²Œì‹œíŒ ì‚¬ì´ë“œë°” -->
<div th:fragment="sidebar" id="sidebar" class="sidebar">
    <div class="sidebar-menu">
        <ul>
            <li><a th:href="@{/board/write}"><span class="sidebar-icon">ğŸ–‹ï¸</span> ê¸€ì“°ê¸°</a></li>
            <li><a th:href="@{/board}"><span class="sidebar-icon">ğŸ“‹</span> í†µí•© ê²Œì‹œíŒ</a></li>
            <li><a th:href="@{/board/important}"><span class="sidebar-icon">â­</span> ì¤‘ìš” ê²Œì‹œë¬¼</a></li>

            <!-- ì „ì‚¬ ê²Œì‹œíŒ ê·¸ë£¹ (is_global = 1) -->
            <li class="toggle-menu">
                <a href="" >
                    <span class="sidebar-icon">ğŸ“¢</span> ì „ì‚¬ ê²Œì‹œíŒ &nbsp;
                    <i class="fas fa-chevron-down"></i>
                </a>
                <ul id="all-menu" class="submenu">
                    <li th:each="board : ${accessibleBoards}" th:if="${board.isActive && board.isGlobal}">
                        <a th:href="@{/board/{id}(id=${board.id})}">
                            <span class="sidebar-icon">ğŸ“„</span>
                            <span th:text="${board.name}">ê²Œì‹œíŒëª…</span>
                        </a>
                    </li>
                </ul>
            </li>

            <!-- ê·¸ë£¹ ê²Œì‹œíŒ (is_global = 0) -->
            <li class="toggle-menu" th:if="${!#lists.isEmpty(accessibleBoards.?[isActive and !isGlobal])}">
                <a href="">
                    <span class="sidebar-icon">ğŸ‘¥</span> ê·¸ë£¹ ê²Œì‹œíŒ &nbsp;
                    <i class="fas fa-chevron-down"></i>
                </a>
                <ul id="group-menu" class="submenu">
                    <li th:each="board : ${accessibleBoards}" th:if="${board.isActive && !board.isGlobal}">
                        <a th:href="@{/board/{id}(id=${board.id})}">
                            <span class="sidebar-icon">ğŸ“</span>
                            <span th:text="${board.name}">ê²Œì‹œíŒëª…</span>
                        </a>
                    </li>
                </ul>
            </li>



            <li><a th:href="@{/board/create}"><span class="sidebar-icon">â•</span> ê²Œì‹œíŒ ë§Œë“¤ê¸°</a></li>
            <li><a th:href="@{/board/manage}"><span class="sidebar-icon">ğŸ›  </span> ê²Œì‹œíŒ ê´€ë¦¬</a></li>
        </ul>
    </div>
</div>

<!-- ê³µí†µ ì‚¬ì´ë“œë°” ìŠ¤í¬ë¦½íŠ¸ í¬í•¨ -->
<th:block th:fragment="sidebarScripts">
    <script th:src="@{/js/fragments/sidebar-common.js}"></script>
</th:block>

</body>
</html>